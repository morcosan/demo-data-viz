import { Meta } from '@storybook/addon-docs/blocks'
import { DocsCodeBlock } from '@ds/docs/core.ts'

<Meta title="Get Started" />

# Get Started

## Installation

Install the required dependencies for the design system:

```
npm install @emotion/react @mantine/core clsx lodash react react-dom
//
npm install -D tailwindcss @tailwindcss/postcss
```

## Tailwind Configuration

Create or update your `tailwind.config.ts` file to use the design system's theme:

<DocsCodeBlock
  filename="tailwind.config.ts"
  code={`
		import { type Config } from 'tailwindcss'
		import { tailwindTheme } from '../../ds/dist/tooling/tailwind.ts'
		//
		const config: Config = {
			content: [
				'./src/**/*.{ts,tsx,mdx}',
				'../../ds/src/**/*.{ts,tsx,mdx}', // Adjust path to your DS package
			],
			theme: tailwindTheme,
		}
		//
		export default config
	`}
/>

Configure PostCSS to use Tailwind CSS:

<DocsCodeBlock
  filename="postcss.config.mjs"
  code={`
		const config = {
			plugins: {
				'@tailwindcss/postcss': {},
			},
		}
		//
		export default config
	`}
/>

Import the design system styles in your global CSS file:

<DocsCodeBlock
  filename="globals.css"
  code={`
		@import '@ds/styles.css';
		//
		@import 'tailwindcss';
		@config './tailwind.config.ts';
	`}
/>

## Providers Setup

Set up all required providers using `HocComposer`. Create a providers file:

<DocsCodeBlock
  filename="providers.tsx"
  code={`
		'use client'
		//
		import {
			A11yService,
			ConfigService,
			HocComposer,
			I18nService,
			RoutingService,
			ThemeService,
			ViewportService,
		} from '@ds/core.ts'
		import { useRouter } from 'next/navigation'
		import { useMemo } from 'react'
		import { useTranslation } from 'react-i18next'
		//
		export const Providers = ({ children }: ReactProps) => {
			const { t } = useTranslation()
			const router = useRouter()
			const navigate = (path: string) => router.push(path)
			const hoc = HocComposer.hoc
			const providers = useMemo(
				() => [
					hoc(ConfigService, {}),
					hoc(A11yService, {}),
					hoc(ViewportService, {}),
					hoc(RoutingService, { navigate }),
					hoc(I18nService, { translate: t, loading: false }),
					hoc(ThemeService, { cookieKey: 'app-color-theme' }),
				],
				[navigate]
			)
			//
			return <HocComposer hocs={providers}>{children}</HocComposer>
		}
	`}
/>

## Next.js Configuration

If you're using Next.js, configure it to transpile the design system package and set up path aliases:

<DocsCodeBlock
  filename="next.config.ts"
  code={`
		import { type NextConfig } from 'next'
		import path from 'node:path'
		//
		const nextConfig: NextConfig = {
			compiler: {
				emotion: true,
			},
			turbopack: {
				root: path.resolve(dirname, '..'), // Monorepo root
				resolveAlias: {
					'@ds/*': '../ds/dist/*',
				},
			},
			rules: {
				'*.svg': {
					loaders: ['@svgr/webpack'],
					as: '*.js',
				},
			},
		}
		//
		export default nextConfig
	`}
/>

## ESLint Configuration

Configure ESLint to use the design system's custom plugin that enforces proper import paths:

<DocsCodeBlock
  filename="eslint.config.ts"
  code={`
		import { defineConfig } from 'eslint/config'
		import { dsImports } from '../ds/dist/tooling/eslint.ts'
		//
		export default defineConfig([
			{
				files: ['**/*.{ts,tsx}'],
				extends: [
					dsImports.configs.recommended,
				],
				plugins: {
					'ds-imports': dsImports,
				},
			},
		])
	`}
/>

## Versioning Configuration (Optional)

To display the design system version in your application, configure environment variables. <br />
You can also generate a build number based on build time.

<DocsCodeBlock
  filename="vite.config.ts or next.config.ts"
  code={`
		import { createBuildNumber, getDsVersion } from '../ds/dist/tooling/utilities.ts'
		//
		// For Vite:
		config.define = {
			ENV__BUILD_NUMBER: JSON.stringify(createBuildNumber()),
			ENV__DS_VERSION: JSON.stringify(getDsVersion()),
		}
		//
		// For Next.js:
		const nextConfig = {
			env: {
				BUILD_NUMBER: createBuildNumber(),
				DS_VERSION: getDsVersion(),
			},
		}
	`}
/>

## TypeScript Configuration for Docs

Add TypeScript type definitions for the documentation components:

<DocsCodeBlock
  filename=".storybook/preview.types.d.ts"
  code={`
		import '@ds/docs/types.d.ts'
	`}
/>
